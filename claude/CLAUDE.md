## Rules
- github.comにアクセスする際はまずghコマンドの利用を検討する
- **テストコード（*Test.kt, *Spec.kt）を読んだり、編集するときは、必ず最初に test-guideline スキルを実行してガイドラインを確認すること**。これは実装計画の一部としてテストを書く場合、バグ修正の一環でテストを追加する場合、リファクタリング時にテストを更新する場合にも適用される。

## テストレビュー・改善時のガイドライン

### 改善提案時
- 改善点を「推奨」と「任意」に分けて提示する
- 複数の改善を適用する前に、どれを適用するか確認を取る

### AAAパターンの適用基準

| ケース | Act分離 |
|--------|---------|
| プロパティアクセスのみ | 不要 |
| メソッド呼び出し（副作用なし） | 任意 |
| 副作用を伴う操作 | 必要 |

## 破壊的変更時のワークフロー

インターフェースやコンストラクタの変更は多くのファイルに影響するため、以下のワークフローを必ず守る。

### 必須ワークフロー

1. **影響調査タスクをTaskListに追加**
   - 変更に着手する前に「〇〇の実装クラスを全て検索」タスクを追加
   - 調査完了まで実際の変更は行わない

2. **Grepで影響範囲を検索**
   - チェックリストに従って全ての依存箇所を特定

3. **修正対象を全てTaskListに追加**
   - 検索結果の各ファイルをTODOリストに追加
   - 本番コード・テストコード両方を含める

4. **TODOリストに従って順次修正**
   - 1ファイルずつ修正・完了マーク
   - 漏れを防止

### 良い例・悪い例

```
# 悪い例（直接変更に着手 → 影響範囲の見落としが発生）
- [x] UserRepository にメソッドを追加
- [ ] UserRepositoryImpl に実装を追加
→ テストコードの FakeUserRepository を見落とす

# 良い例（調査タスクを挟む）
- [x] UserRepository の実装クラスを全て検索
- [x] 検索結果: UserRepositoryImpl, FakeUserRepository x3, テスト内Fake x8
- [x] UserRepository にメソッドを追加
- [x] UserRepositoryImpl に実装を追加
- [x] FakeUserRepository (commonTest) に実装を追加
- [x] FakeUserRepository (feature test) に実装を追加
- [x] ... (全ファイル分)
```
