---
name: plan
description: 計画を立てる。「計画を立てて」「plan」と依頼された際に使用。
argument-hint: <要件>
---

指定された要件を分析して、実装計画を立ててください。

## 入力
$ARGUMENTS

## ワークフロー

### Phase 1: 要求分析
1. 入力がテキスト要件の場合:
   - 要件の曖昧な点を洗い出す
   - 必要に応じてユーザーに質問
2. 以下を明確にする:
   - 達成すべきゴール（What）
   - 制約条件・前提条件
   - スコープ外の事項
3. requirements-analyst エージェントを使用して仕様書を作成
   - 出力先は `./spec.md` とする

### Phase 2: 調査・計画立案
1. Phase 1で作成した仕様書をPlanエージェントに渡す
2. **Planエージェントに以下を指示**:
   - 仕様書を読み込む
   - `impact-analysis` スキルを使って影響範囲を調査する
   - 影響範囲の調査結果を踏まえて実装計画を作成する
   - 計画書を `./plan.md` に出力する

### Phase 3: レビュー・改善
1. `codex-review` スキルを使用して計画をレビュー
2. フィードバックを踏まえて計画を修正
3. 1-2を3回繰り返す
